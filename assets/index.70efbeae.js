import{U as e}from"./vendor.88075330.js";!function(e=".",t="__import__"){try{self[t]=new Function("u","return import(u)")}catch(s){const i=new URL(e,location),a=e=>{URL.revokeObjectURL(e.src),e.remove()};self[t]=e=>new Promise(((s,r)=>{const o=new URL(e,i);if(self[t].moduleMap[o])return s(self[t].moduleMap[o]);const d=new Blob([`import * as m from '${o}';`,`${t}.moduleMap['${o}']=m;`],{type:"text/javascript"}),n=Object.assign(document.createElement("script"),{type:"module",src:URL.createObjectURL(d),onerror(){r(new Error(`Failed to import: ${e}`)),a(n)},onload(){s(self[t].moduleMap[o]),a(n)}});document.head.appendChild(n)})),self[t].moduleMap={}}}("assets/");class t extends Phaser.Scene{constructor(){super("preloader")}preload(){this.load.image("start-background","assets/img/start-page.png"),this.load.image("deadline-select","assets/img/deadline-select.png"),this.load.image("background","assets/img/background.png"),this.load.image("start-btn","assets/img/start-btn.png"),this.load.image("platform","assets/img/ground.png"),this.load.image("spike-behind","assets/img/spike-behind.png"),this.load.image("layer-meme","assets/img/layer-meme.png"),this.load.image("life","assets/img/life-indicator.png"),this.load.spritesheet("poki","assets/img/poki.png",{frameWidth:86,frameHeight:64}),this.load.spritesheet("spike-single","assets/img/spike-single.png",{frameWidth:30,frameHeight:40}),this.load.spritesheet("spike-double","assets/img/spike-double.png",{frameWidth:60,frameHeight:40}),this.load.audio("background",["assets/audio/background.mp3"])}create(){this.scene.start("gamestart")}}class s extends Phaser.Physics.Arcade.Sprite{constructor(e){super(e,300,300,"poki"),e.add.existing(this),e.physics.add.existing(this),this.setGravityY(900),this.createAnims(),this.anims.play("run")}createAnims(){this.anims.create({key:"run",frames:this.anims.generateFrameNumbers("poki",{start:0,end:4}),frameRate:15,repeat:-1}),this.anims.create({key:"gethurt",frames:[{key:"poki",frame:"5"}],duration:1e3,repeat:0})}getHurt(e,t){e.anims.play("gethurt"),e.body.setVelocityY(-200),e.setGravityY(1e3)}}class i extends Phaser.Scene{constructor(){super("game"),this.timeCounter=0,this.spikePercent=25,this.spikeShowTime=5}init(e){this.deadlineText=e.deadlineText}refresh(){}preload(){}create(){let e=this.scale.width,t=this.scale.height;this.background=this.add.image(40,0,"layer-meme").setOrigin(0,0).setScrollFactor(0,0),this.color1=new Phaser.Display.Color(105,59,76),this.color2=new Phaser.Display.Color(105,70,0),this.player=new s(this),this.addEscapeText(),this.timeText=this.add.text(900,20,"Time Survived:"),this.timeText.setScrollFactor(0,0),this.timer=this.time.addEvent({delay:1e3,callback:this.timerUpdate,callbackScope:this,loop:!0}),this.bgMusic=this.sound.add("background",{loop:!0}),this.bgMusic.play(),this.platformGroup=this.add.group({removeCallback:e=>{e.scene.platformPool.add(e)}}),this.platformPool=this.add.group({removeCallback:e=>{e.scene.platformGroup.add(e)}}),this.addPlatform(e,e/2,.8*t),this.physics.add.collider(this.player,this.platformGroup)}addEscapeText(){for(let e=0;e<100;e++){const t=20,s=10+20*e;this.add.text(t,s,this.deadlineText,{fontSize:"24px",fontStyle:"bold",color:"0x000000"}).setOrigin(0).setDepth(1)}}addPlatform(e,t,s){var i,a;let r;if((null==(i=this.platformPool)?void 0:i.getLength())?(r=this.platformPool.getFirst(),r.x=t,r.active=!0,r.visible=!0,this.platformPool.remove(r)):(r=this.physics.add.sprite(t,s,"platform"),r.setImmovable(!0),r.setVelocityX(-350),this.platformGroup.add(r)),r.displayWidth=e,this.nextPlatformDistance=Phaser.Math.Between(110,300),this.spikegroup=this.add.group({removeCallback:function(e){e.scene.spikepool.add(e)}}),this.spikepool=this.add.group({removeCallback:function(e){e.scene.spikegroup.add(e)}}),this.physics.add.overlap(this.player,this.spikegroup,this.player.getHurt,void 0,this),this.timeCounter>this.spikeShowTime&&Phaser.Math.Between(1,100)<=this.spikePercent)if(null==(a=this.spikepool)?void 0:a.getLength()){let i=this.spikepool.getFirst();i.x=t-e/2+Phaser.Math.Between(1,e),i.y=s-15,i.active=!0,i.visible=!0,this.spikepool.remove(i)}else{let i=this.physics.add.sprite(t-e/2+Phaser.Math.Between(1,e),s-15,"spike-single");i.setImmovable(!0),i.setVelocityX(r.body.velocity.x),i.setDepth(2),this.spikegroup.add(i)}}update(){var e;this.player.x=300;let t=Phaser.Display.Color.Interpolate.ColorWithColor(this.color1,this.color2,100,1);this.cameras.main.setBackgroundColor(t);let s=1142,i=0;if(this.platformGroup.getChildren().forEach((function(e){let t=1142-e.x-e.displayWidth/2;t<s&&(s=t,i=e.y),e.x<-e.displayWidth/2&&(this.platformGroup.killAndHide(e),this.platformGroup.remove(e))}),this),this.spikegroup.getChildren().forEach((function(e){e.x<-e.displayWidth/2&&(this.spikegroup.killAndHide(e),this.spikegroup.remove(e))}),this),s>this.nextPlatformDistance){this.platformSizeRange=[100,250];let e=Phaser.Math.Between(this.platformSizeRange[0],this.platformSizeRange[1]),t=10*Phaser.Math.Between(10,-10),s=i+t,a=300,r=400,o=Phaser.Math.Clamp(s,a,r);console.log(o),this.addPlatform(e,1142+e/2,400)}this.cursors=this.input.keyboard.createCursorKeys(),(null==(e=this.cursors.space)?void 0:e.isDown)&&this.player.body.touching.down&&this.player.setVelocityY(-400),this.player.y>450&&(this.bgMusic.stop(),this.scene.start("gameover",{timeCounter:this.timeCounter,deadlineText:this.deadlineText}),this.timeCounter=0)}timerUpdate(){this.timeCounter+=1,this.timeText.setText(`Time Survived: ${this.timeCounter}`)}}class a extends Phaser.Scene{constructor(){super("gameover")}init(e){this.timeCounter=e.timeCounter,this.deadlineText=e.deadlineText}preload(){}create(){this.add.image(0,0,"background").setOrigin(0),this.timeText=this.add.text(571,200,"Time Survived:",{fontSize:"32px"}).setOrigin(.5),this.timeText.setText(`You've escaped from ${this.deadlineText} for ${this.timeCounter} seconds.`),this.add.text(571,300,"Press SPACE to play again!",{fontSize:"28px",color:"0x000000"}).setOrigin(.5)}update(){var e;this.cursors=this.input.keyboard.createCursorKeys(),(null==(e=this.cursors.space)?void 0:e.isDown)&&(this.scene.stop("gameover"),this.scene.start("game"))}}class r extends Phaser.Scene{constructor(){super("gamestart")}preload(){}create(){this.add.image(0,0,"start-background").setOrigin(0),this.add.text(571,250,"Press SPACE to start!",{fontSize:"20px"}).setOrigin(.5)}update(){var e;this.cursors=this.input.keyboard.createCursorKeys(),(null==(e=this.cursors.space)?void 0:e.isDown)&&(this.scene.stop("gamestart"),this.scene.start("game"))}}class o extends Phaser.Scene{constructor(){super("gameopen")}preload(){}create(){this.add.image(0,0,"deadline-select").setOrigin(0),this.deadlineText=this.add.text(571,220,"click to type in",{fixedHeight:36}),this.deadlineText.setOrigin(.5),this.deadlineText.setInteractive().on("pointerdown",(()=>{this.rexUI.edit(this.deadlineText)})),this.add.text(571,350,"Press SPACE to RUN!",{fontSize:"20px"}).setOrigin(.5)}update(){var e;this.cursors=this.input.keyboard.createCursorKeys(),(null==(e=this.cursors.space)?void 0:e.isDown)&&(this.scene.stop("gameopen"),this.scene.start("game",{deadlineText:this.deadlineText.text}))}}const d={type:Phaser.AUTO,width:1142,height:500,physics:{default:"arcade",arcade:{debug:!0}},parent:"phaser-container",dom:{createContainer:!0},plugins:{scene:[{key:"rexUI",plugin:e,mapping:"rexUI"}]},scene:[t,r,o,i,a]};new Phaser.Game(d);
