import{U as e}from"./vendor.88075330.js";!function(e=".",t="__import__"){try{self[t]=new Function("u","return import(u)")}catch(s){const i=new URL(e,location),a=e=>{URL.revokeObjectURL(e.src),e.remove()};self[t]=e=>new Promise(((s,r)=>{const o=new URL(e,i);if(self[t].moduleMap[o])return s(self[t].moduleMap[o]);const d=new Blob([`import * as m from '${o}';`,`${t}.moduleMap['${o}']=m;`],{type:"text/javascript"}),n=Object.assign(document.createElement("script"),{type:"module",src:URL.createObjectURL(d),onerror(){r(new Error(`Failed to import: ${e}`)),a(n)},onload(){s(self[t].moduleMap[o]),a(n)}});document.head.appendChild(n)})),self[t].moduleMap={}}}("assets/");class t extends Phaser.Scene{constructor(){super("preloader")}preload(){this.load.image("start-background","assets/img/start-page.png"),this.load.image("deadline-select","assets/img/deadline-select.png"),this.load.image("background","assets/img/background.png"),this.load.image("start-btn","assets/img/start-btn.png"),this.load.image("platform","assets/img/ground.png"),this.load.image("spike-behind","assets/img/spike-behind.png"),this.load.image("layer-meme","assets/img/layer-meme.png"),this.load.image("life","assets/img/life-indicator.png"),this.load.spritesheet("poki","assets/img/poki.png",{frameWidth:86,frameHeight:64}),this.load.spritesheet("spike-single","assets/img/spike-single.png",{frameWidth:30,frameHeight:40}),this.load.spritesheet("spike-double","assets/img/spike-double.png",{frameWidth:60,frameHeight:40}),this.load.audio("background",["assets/audio/background.mp3"])}create(){this.scene.start("gamestart")}}class s extends Phaser.Physics.Arcade.Sprite{constructor(e){super(e,300,300,"poki"),e.add.existing(this),e.physics.add.existing(this),this.setGravityY(900),this.createAnims(),this.anims.play("run")}createAnims(){this.anims.create({key:"run",frames:this.anims.generateFrameNumbers("poki",{start:0,end:4}),frameRate:15,repeat:-1}),this.anims.create({key:"gethurt",frames:[{key:"poki",frame:"5"}],duration:200,repeat:0})}getHurt(e,t){e.anims.play("gethurt"),e.setGravityY(1e3)}}class i extends Phaser.Scene{constructor(){super("game"),this.timeCounter=0,this.platformChangeTime=2,this.speedChangeTime=25}init(e){this.deadlineText=e.deadlineText}refresh(){}preload(){}create(){this.cameras.main.setBackgroundColor(6896460);const e=this.scale.width,t=this.scale.height;this.background=this.add.image(40,0,"layer-meme").setOrigin(0,0).setScrollFactor(0,0),this.player=new s(this),this.timeText=this.add.text(900,20,"Time Survived:"),this.timeText.setScrollFactor(0,0),this.timer=this.time.addEvent({delay:1e3,callback:this.timerUpdate,callbackScope:this,loop:!0}),this.bgMusic=this.sound.add("background",{loop:!0}),this.bgMusic.play(),this.platformGroup=this.add.group({removeCallback:e=>{this.platformPool.add(e)}}),this.physics.add.collider(this.player,this.platformGroup),this.platformPool=this.add.group({removeCallback:e=>{this.platformGroup.add(e)}}),this.platformVerticalLimit=[.8,.4],this.addPlatform(e,e/2,.8*t,-350),this.addEscapeText()}addEscapeText(){for(let e=0;e<100;e++){const t=20,s=10+20*e;this.add.text(t,s,this.deadlineText,{fontSize:"24px",fontStyle:"bold",color:"0x000000"}).setOrigin(0).setDepth(1)}}addPlatform(e,t,s,i){var a;let r;(null==(a=this.platformPool)?void 0:a.getLength())?(r=this.platformPool.getFirst(),r.x=t,r.y=s,r.active=!0,r.visible=!0,this.platformPool.remove(r)):(console.log("here",s),r=this.physics.add.sprite(t,s,"platform"),r.setImmovable(!0),r.setVelocityX(i),this.platformGroup.add(r)),r.displayWidth=e,this.nextPlatformDistance=Phaser.Math.Between(110,280)}update(){var e;this.player.x=300;let t=1142;if(this.platformGroup.getChildren().forEach((e=>{let s=1142-e.x-e.displayWidth/2;s<t&&(t=s,e.y),e.x<-e.displayWidth/2&&(this.platformGroup.killAndHide(e),this.platformGroup.remove(e))}),this),t>this.nextPlatformDistance){console.log(this.timeCounter,this.platformChangeTime);let e=Phaser.Math.Between(100,300),t=325,s=400,i=400,a=1142+e/2,r=-350;this.timeCounter>2&&(i=Phaser.Math.Between(t,s)),this.addPlatform(e,a,i,r),console.log(i)}this.cursors=this.input.keyboard.createCursorKeys(),(null==(e=this.cursors.space)?void 0:e.isDown)&&this.player.body.touching.down&&this.player.setVelocityY(-400),this.player.y>450&&(this.bgMusic.stop(),this.scene.start("gameover",{timeCounter:this.timeCounter,deadlineText:this.deadlineText}),this.timeCounter=0)}timerUpdate(){this.timeCounter+=1,this.timeText.setText(`Time Survived: ${this.timeCounter}`)}}class a extends Phaser.Scene{constructor(){super("gameover")}init(e){this.timeCounter=e.timeCounter,this.deadlineText=e.deadlineText}preload(){}create(){this.add.image(0,0,"background").setOrigin(0),this.timeText=this.add.text(571,200,"Time Survived:",{fontSize:"32px"}).setOrigin(.5),this.timeText.setText(`You've escaped from ${this.deadlineText} for ${this.timeCounter} seconds.`),this.add.text(571,300,"Press SPACE to play again!",{fontSize:"28px",color:"0x000000"}).setOrigin(.5)}update(){var e;this.cursors=this.input.keyboard.createCursorKeys(),(null==(e=this.cursors.space)?void 0:e.isDown)&&(this.scene.stop("gameover"),this.scene.start("game"))}}class r extends Phaser.Scene{constructor(){super("gamestart")}preload(){}create(){this.add.image(0,0,"start-background").setOrigin(0),this.add.text(571,250,"Press SPACE to start!",{fontSize:"20px"}).setOrigin(.5)}update(){var e;this.cursors=this.input.keyboard.createCursorKeys(),(null==(e=this.cursors.space)?void 0:e.isDown)&&(this.scene.stop("gamestart"),this.scene.start("gameopen"))}}class o extends Phaser.Scene{constructor(){super("gameopen")}preload(){}create(){this.add.image(0,0,"deadline-select").setOrigin(0),this.deadlineText=this.add.text(571,220,"double-click to type",{fixedHeight:36}),this.deadlineText.setOrigin(.5),this.deadlineText.setInteractive().on("pointerdown",(()=>{this.rexUI.edit(this.deadlineText)})),this.add.text(571,350,"Press SPACE to RUN!",{fontSize:"20px"}).setOrigin(.5)}update(){var e;this.cursors=this.input.keyboard.createCursorKeys(),(null==(e=this.cursors.space)?void 0:e.isDown)&&(this.scene.stop("gameopen"),this.scene.start("game",{deadlineText:this.deadlineText.text}))}}const d={type:Phaser.AUTO,scale:{mode:Phaser.Scale.FIT,parent:"phaser-example",autoCenter:Phaser.Scale.CENTER_BOTH,width:1142,height:500},physics:{default:"arcade",arcade:{debug:!1}},parent:"phaser-container",dom:{createContainer:!0},plugins:{scene:[{key:"rexUI",plugin:e,mapping:"rexUI"}]},backgroundColor:"#693B4C",scene:[t,r,o,i,a]};new Phaser.Game(d);
